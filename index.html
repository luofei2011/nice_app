<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EXE</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0;maximum-scale=1.0;user-scalable=no;">
    <meta http-equiv="X-UA-Compatibel" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="./static/css/reset.css">
    <link rel="stylesheet" href="./static/css/fontello.css">
    <link rel="stylesheet" href="./static/css/animation.css">
    <link rel="stylesheet" href="./static/css/index.css">
</head>
<body>
<header id="header">
    <a href="/user_center.html" class="position"><i class="icon-user"></i></a>
    <span>添加记录</span>
</header>
<div id="wrapper">
    <button class="btn btn-txt" id="addItem">添加<i class="icon-plus"></i></button>
    <div class="list">
        <div class="item">
            <label for="">类别1</label>
            <input type="number">
            <span class="unit">米</span>
            <a href="javascript:void(0);">
                <i class="icon-pencil"></i>
            </a>
        </div>
        <div class="item">
            <label for="">类别1</label>
            <input type="number">
            <span class="unit">米</span>
            <a href="javascript:void(0);">
                <i class="icon-pencil"></i>
            </a>
        </div>
        <div class="item">
            <label for="">类别1</label>
            <input type="number">
            <span class="unit">米</span>
            <a href="javascript:void(0);">
                <i class="icon-pencil"></i>
            </a>
        </div>
        <div class="item">
            <label for="">类别1</label>
            <input type="number">
            <span class="unit">米</span>
            <a href="javascript:void(0);">
                <i class="icon-pencil"></i>
            </a>
        </div>
    </div>
</div>
<div class="btn-group clearfix">
    <button class="full-btn">存储</button>
    <button class="full-btn">查询</button>
</div>
<div id="cover">
    <div class="add-item">
        <h2 class="add-title">添加项目</h2>
        <div class="list">
            <div class="item">
                <span class="label">Name</span>
                <input type="text" class="input">
            </div>
            <div class="item">
                <span class="label">Unit</span>
                <select id="" class="input" name="">
                    <option value="个">个</option>
                    <option value="次">次</option>
                    <option value="米">米</option>
                    <option value="组">组</option>
                    <option value="小时">小时</option>
                    <option value="公里">公里</option>
                </select>
            </div>
            <div class="item">
                <span class="label">Cycle</span>
                <select id="" name="" class="input">
                    <option value="每天">每天</option>
                    <option value="每周">每周</option>
                    <option value="每月">每月</option>
                    <option value="每年">每年</option>
                </select>
            </div>
            <div class="deal-btn clearfix">
                <a href="javascript:void(0);" class="remove">REMOVE</a>
                <a href="javascript:void(0);" class="save">DONE</a>
                <a href="javascript:void(0);" class="cancel">CANCEL</a>
            </div>
        </div>
    </div>
</div>
<script src="http://cdn.staticfile.org/zepto/1.0rc1/zepto.min.js"></script>
<script>
(function() {
    /*
    var timer = null;
    $('#wrapper input[type=number]').on('focus', function() {
        var $self = $(this);
        timer = setTimeout(function() {
            var v = $self.val();
            if (isNaN(v)) {
                $self.addClass('error');
            } else {
                $self.removeClass('error');
            }

            timer = setTimeout(arguments.callee, 100);
        }, 100);
    }).on('blur', function() {
        window.clearTimeout(timer);
    });
    */

    // 初始化覆盖层 
    var $cover = $('#cover');
    var $addItem = $('.add-item');

    $addItem.on('touchstart', function(e) {
        e.cancelBubble = true;
    });

    $cover.on('touchstart', function() {
        $(this).hide();
    });

    var $win = $(window);
    function initCover() {
        var win_width = $win.width();
        var win_height = $win.height();

        $cover.width(win_width);
        $cover.height(win_height);
        $cover.show();
    }

    $cover.width($win.width()).height($win.height());

    $win.on('resize', initCover);

    // 处理新加按钮事件
    $('.deal-btn').on('touchstart', function(e) {
        var target = e.target;
        var $this = $(target);
        if ($this.hasClass('save')) {
        } else if ($this.hasClass('cancel')) {
            $cover.trigger('touchstart');
        }
    });

    $('#addItem').on('touchstart', function() {
        $cover.show();
    });
})();
</script>
</body>
</html>
